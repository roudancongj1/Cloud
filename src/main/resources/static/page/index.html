<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/ele.css">
    <script src="js/vue.global.js"></script>
    <script src="js/element-plus.js"></script>
    <script src="js/axios.min.js"></script>
    <script src="js/vue-router.global.js"></script>
    <style>
        #app{
            width: 100%;
            top: 0;
            left: 0;
            position: absolute;
        }
        body{
            background: #f9f9fa;
        }
        .header {
            padding: 40px;
            text-align: right;
            height: 100px;
        }
        .herderLink {
            margin: 0 20px;
            font-size: 20px;
        }
        .cont{
            padding: 100px;
        }
    </style>
</head>
<body>
<div id="app">
    <el-container>
        <el-header class="header">
            <el-affix>
                <el-link class="herderLink" @click="index">首页</el-link>
                <el-link class="herderLink" @click="services">服务</el-link>
                <el-link class="herderLink" @click="city">城市</el-link>
                <el-link class="herderLink" @click="about">关于</el-link>
                <el-link class="herderLink" @click="support">支持我们</el-link>
                <el-link class="herderLink" @click="feedback">反馈</el-link>
                <el-button class="herderLink" @click="tologin" v-if="visitor" round>登录</el-button>
                <el-dropdown trigger="click" v-else>
                    <el-button class="herderLink" circle>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" class="bi bi-person-lines-fill" viewBox="0 0 16 16">
                            <path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"/>
                        </svg>
                    </el-button>
                    <template #dropdown>
                        <el-dropdown-menu>
                            <el-dropdown-item @click="touser">个人资料</el-dropdown-item>
                            <el-dropdown-item @click="toaccount">我的账户</el-dropdown-item>
                            <el-dropdown-item v-if="userRole != '0'" @click="tomanage">后台管理</el-dropdown-item>
                            <el-dropdown-item @click="logout" divided>退出登录</el-dropdown-item>
                        </el-dropdown-menu>
                    </template>
                </el-dropdown>
            </el-affix>
        </el-header>
        <el-main>
            <router-view></router-view>
            <!--<img src="img/404.jpg">-->
        </el-main>
    </el-container>
</div>

<script>

    const App ={
        data(){
            return{
                token: '',
                visitor: true,
                userRole: '',
                info: {
                    name: '111',
                    age: ''
                },
                static: {
                    l: [],
                    i: []
                },
            }
        },
        methods: {
            index() {
                this.$router.push({ name: 'index' })
            },
            services() {
                this.$router.push({
                    name: 'services',
                    query: {
                        label: this.static.l,
                        info: this.static.i,
                    }
                })
            },
            city() {
                this.$router.push({
                    name: 'city',
                    params: {
                        id: '3',
                        name: '城市'
                    }
                })
            },
            about() {
                this.$router.push({
                    name: 'about' ,
                    query: {
                        label: this.static.l,
                        info: this.static.i,
                    }})
            },
            support() {
                this.$router.push({ name: 'support' })
            },
            feedback() {
                this.$router.push({ name: 'feedback' })
            },
            tologin() { window.location.href="/toLogin" },
            touser() {window.location.href="/user" },
            toaccount() {window.location.href="/account" },
            tomanage() { window.location.href="/manage"},
            cardInfo() { axios.get("data/cardInfo").then(res => {
                res.data.data.forEach(c => {
                    this.static.l.push(c.cardLabel)
                    this.static.i.push(c.cardInfo)
                })

            })},
            toVisitor() {
                axios({
                    method: 'get',
                    url: 'visitor',
                    headers: {'token': localStorage.getItem('token')}
                }).then(res => {
                    this.visitor = res.data.data
                    if (!res.data.data){
                        axios({
                            method: 'get',
                            url: 'userRole',
                            headers: {'token': localStorage.getItem('token')}
                        }).then(res => {
                            this.userRole = res.data.userRole
                        })
                    }
                })
            },
            logout() {
                axios.get("logout",{headers: {'token': localStorage.getItem('token')}}).then(res => {
                    if(res.data.code == 0) {
                        this.$notify.success({
                            title: '注销成功',
                            massage: res.data.msg
                        })
                    }else{
                        this.$notify.error({
                            title: '注销失败',
                            massage: res.data.msg
                        })
                    }
                })
                window.setTimeout(function (){window.location.reload()},2*1000)
            },

        },
        created() {
            this.cardInfo()
            this.toVisitor()

        },
        watch: {
          // $route(){
          //     this.$route.params.label=this.cards.l
          // },
        },
        mounted() {
            this.token = localStorage.getItem('token')
        },
    }

    const index = { template: '<el-container class="cont">\n' +
            '                <div>\n' +
            '                    <h1 style="font-size: 30px">出差/旅游到疫情地区?</h1>\n' +
            '                    <h3>担心隔离的环境脏,乱,差?</h3>\n' +
            '                    <p>隔离期间的日日夜夜少不了对亲人的思念，舒适的隔离环境对您显得尤为重要，一起来挑选一个满意的隔离地点吧!</p>\n' +
            '                    <router-link to="city"><el-button type="info" round>点击挑选</el-button></router-link>\n' +
            '                </div>\n' +
            '                <img src="img/index1.png">\n' +
            '            </el-container>\n' + ''}

    const services = { template: '<el-container>\n' +
            '                <el-header style="text-align: center">\n' +
            '                    <h1>我们的服务</h1>\n' +
            '                    <el-divider></el-divider>\n' +
            '                </el-header>\n' +
            '                <el-main>\n' +
            '                        <el-container>\n' +
            '                            <el-card v-for="(num,index) in 4" style="margin: 20px;width: 25%">\n' +
            '                                <template #header>\n' +
            '                                    <div>\n' +
            '                                        <span style="color: red;text-decoration: underline">{{$route.query.label[index]}}</span>\n' +
            '                                    </div>\n' +
            '                                </template>\n' +
            '                                <div><span style="color: #303133">{{$route.query.info[index]}}</span></div>\n' +
            '                            </el-card>\n' +
            '                        </el-container>\n' +
            '                </el-main>\n' +
            '            </el-container>' + '' }

    const city = { template: '<el-carousel height="300px">\n' +
            '                <el-carousel-item :key="item">\n' +
            '                    <img src="img/sh.jpg" style="object-fit: fill;width: 100%;height: 100%">\n' +
            '                </el-carousel-item>\n' +
            '                <el-carousel-item :key="item">\n' +
            '                    <img src="img/gz.jpg" style="object-fit: fill;width: 100%;height: 100%">\n' +
            '                </el-carousel-item>\n' +
            '                <el-carousel-item :key="item">\n' +
            '                    <img src="img/bj.jpg" style="object-fit: fill;width: 100%;height: 100%">\n' +
            '                </el-carousel-item>\n' +
            '                <el-carousel-item :key="item">\n' +
            '                    <img src="img/sz.jpg" style="object-fit: fill;width: 100%;height: 100%">\n' +
            '                </el-carousel-item>\n' +
            '            </el-carousel>\n'+'<p>城市操作1</p>\n' +
            '            <p>城市操作1</p>\n' +
            '            <p>城市操作1</p>\n' +
            '            <p>城市操作1</p>' + ''}

    const about = { template: '<el-container>\n' +
            '                <el-header style="text-align: center">\n' +
            '                    <h1>关于</h1>\n' +
            '                </el-header>\n' +
            '                <el-main>\n' +
            '                    <el-container>\n' +
            '                        <div style="width: 50%;text-align: right;padding: 20px" >\n' +
            '                        <div v-for="(num,index) in 5">\n' +
            '                            <p>{{$route.query.label[index+4]}}</p><el-divider></el-divider>\n' +
            '                        </div>\n' +
            '                        </div>\n' +
            '                        <div style="width: 50%;padding: 20px">\n' +
            '                        <div  v-for="(num,index) in 5">\n' +
            '                            <p>{{$route.query.info[index+4]}}</p><el-divider></el-divider>\n' +
            '                        </div>\n' +
            '                        </div>\n' +
            '                    </el-container>\n' +
            '                </el-main>\n' +
            '            </el-container>' + ''}

    const support = { template: '<div>支持我们</div>'+''}

    const feedback = { template: '<el-container>\n' +
            '                <div style="width: 30%;padding: 10px">\n' +
            '                    <el-card>\n' +
            '                        <template #header>\n' +
            '                            <div class="card-header">\n' +
            '                                <span>联系方式</span>\n' +
            '                            </div>\n' +
            '                        </template>\n' +
            '                        <p>地址-哈尔滨啊实打实</p>\n' +
            '                        <p>电话-1232142141</p>\n' +
            '                        <p>邮箱-Yundsal@123.com</p>\n' +
            '                    </el-card>\n' +
            '                </div>\n' +
            '                <div style="width: 70%;padding: 10px">\n' +
            '                    <el-form :inline="true" :model="formInline" class="demo-form-inline">\n' +
            '                        <el-form-item label="v-model=youxiang">\n' +
            '                            <el-input placeholder="邮箱"></el-input>\n' +
            '                        </el-form-item>\n' +
            '                        <el-form-item label="地址 by">\n' +
            '                            <el-input placeholder="地址"></el-input>\n' +
            '                        </el-form-item>\n' +
            '                        <el-form-item label="电话 by">\n' +
            '                            <el-input placeholder="电话"></el-input>\n' +
            '                        </el-form-item>\n' +
            '                        <el-form-item >\n' +
            '                            <el-input placeholder="留言" type="textarea"></el-input>\n' +
            '                        </el-form-item><el-button type="primary" round>提交</el-button>\n' +
            '                    </el-form>\n' +
            '                </div>\n' +
            '            </el-container>' +''}

    const error = {template: '<div style="padding: 100px;text-align: center" ><h1>无效的页面路径^^</h1>' +
            '<img src="img/404p.png"></div>'}

    const router = VueRouter.createRouter({
        history: VueRouter.createWebHashHistory(),
        routes: [
            { path: '/:catchAll(.*)', redirect: '/404'},
            { path: '/404', name: '404', component: error },
            { path: '/', redirect: '/index'},
            { path: '/index', name: 'index', component: index },
            { path: '/services', name: 'services', component: services},
            { path: '/city', name: 'city', component: city},
            { path: '/about', name: 'about', component: about},
            { path: '/support', name: 'support', component: support},
            { path: '/feedback', name: 'feedback', component: feedback}

        ]
    })
    Vue.createApp(App)
        .use(router)
        .use(ElementPlus)
        .mount("#app")
</script>
</body>
</html>
