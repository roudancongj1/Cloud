<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用户</title>
    <link rel="stylesheet" href="css/ele.css">
    <script src="js/vue.global.js"></script>
    <script src="js/element-plus.js"></script>
    <script src="js/axios.min.js"></script>
    <script src="js/vue-router.global.js"></script>
    <style>
        #app{
            width: 100%;
            top: 0;
            left: 0;
            position: absolute;
        }
        body{
            background: #f9f9fa;
        }
        .menu{
            height: 100vh;
        }
    </style>
</head>
<body>
<div id="app">
    <el-container>
        <el-aside >
            <el-menu class="menu">
                <el-menu-item index="1-1">城市信息管理</el-menu-item>
                <el-menu-item index="1-2">用户管理</el-menu-item>
                <el-menu-item index="1-3">查看反馈</el-menu-item>
                <el-sub-menu index="1-4">
                    <template #title>页面更改</template>
                    <el-menu-item index="1-4-1">关于</el-menu-item>
                    <el-menu-item index="1-4-1">支持我们</el-menu-item>
                </el-sub-menu>
            </el-menu>
        </el-aside>
        <el-container>
            <el-header>
                <a href="/">返回首页</a>
                <span style="float: right">您好：嗷嗷嗷嗷</span>
            </el-header>
            <el-main>
                <el-table :data="tableData" stripe style="width: 100%">
                    <el-table-column prop="date" label="Date" width="180" />
                    <el-table-column prop="name" label="Name" width="180" />
                    <el-table-column prop="address" label="Address" />
                </el-table>
                <el-pagination background layout="prev, pager, next" :total="50"></el-pagination>
            </el-main>
        </el-container>
    </el-container>
</div>
<script>
    const App ={
        data(){
            return {
                info: '',
                tableData: [
                    {
                        date: '2016-05-03',
                        name: 'Tom',
                        address: 'No. 189, Grove St, Los Angeles',
                    },
                    {
                        date: '2016-05-02',
                        name: 'Tom',
                        address: 'No. 189, Grove St, Los Angeles',
                    },
                    {
                        date: '2016-05-04',
                        name: 'Tom',
                        address: 'No. 189, Grove St, Los Angeles',
                    },
                    {
                        date: '2016-05-01',
                        name: 'Tom',
                        address: 'No. 189, Grove St, Los Angeles',
                    },
                ],
            }
        },
        methods: {
            test(){
                axios.get("/test",info).then(res => ( this.info = res.data))
            },
            toVisitor() {
                axios({
                    method: 'get',
                    url: 'visitor',
                    headers: {'token': localStorage.getItem('token') }
                }).then(res => {
                    if(res.data.data){
                        this.$message.error("登陆状态已过期或未登录")
                        window.setTimeout(function () {
                            window.location.href = window.location.protocol + '//' + window.location.host + "/"}, 2 * 1000)
                    }
                })
            },
        },
        created() {
            this.toVisitor()
        }
    }

    const user ={ template: '<div>用户</div>'}
    const router = VueRouter.createRouter({
        history: VueRouter.createWebHashHistory(),
        routes: [
            { path: '/user', name: 'user', component: user }
        ]
    })


    Vue.createApp(App)
        .use(router)
        .use(ElementPlus)
        .mount("#app")
</script>
</body>
</html>
