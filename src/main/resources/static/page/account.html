<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>账户</title>
    <link rel="stylesheet" href="css/ele.css">
    <script src="js/vue.global.js"></script>
    <script src="js/element-plus.js"></script>
    <script src="js/axios.min.js"></script>
    <script src="js/vue-router.global.js"></script>
    <style>
        #app{
            width: 100%;
            top: 0;
            left: 0;
            position: absolute;
        }
        body{
            background: #f9f9fa;
        }
        .container{
            padding: 200px;
        }
        .leftDiv{
            width: 40%;
            padding: 20px 50px;
        }
        .rightDiv{
            width: 60%;

        }
        .img{
            width: 100%;
            height: 100%;
        }
        .downDiv{
            width: 100%;
            height: 10%;
            background-color: #8c939d;
            bottom: 0;
            position: fixed;
            text-align: right;
        }
        .downBtn{
            margin: 20px 50px;
        }
        .row{
            margin: 15px;
        }
        .label{
            color: #999;
            font-family: "Microsoft YaHei UI";
        }
    </style>
</head>
<body>
<div id="app">
    <el-container class="container">
        <div class="leftDiv">
            <img class="img" src="img/str2.png">
        </div>
        <div class="rightDiv">
            <h2>{{place.placeName}}</h2>
            <el-divider></el-divider>
            <el-row class="row" gutter="20" justify="left">
                <el-col :span="4">
                    <span class="label">价格</span>
                </el-col>
                <el-col :span="18">
                    <span style="color: red;font-size: xx-large">{{place.placeMoney}}</span>
                    <span class="label">元/天</span>
                </el-col>
            </el-row>
            <el-row class="row" gutter="20" justify="left">
                <el-col :span="4">
                    <span class="label">食物</span>
                </el-col>
                <el-col :span="18">
                    <span class="label">{{place.placeEat}}</span>
                </el-col>
            </el-row>
            <el-row class="row" gutter="20" justify="left">
                <el-col :span="4">
                    <span class="label">wifi</span>
                </el-col>
                <el-col :span="18">
                    <span class="label">{{place.placeWifi}}</span>
                </el-col>
            </el-row>
            <el-row class="row" gutter="20" justify="left">
                <el-col :span="4">
                    <span class="label">简介</span>
                </el-col>
                <el-col :span="18">
                    <span class="label">{{place.placeInfo}}</span>
                </el-col>
            </el-row>
            <el-row class="row" gutter="20" >
                <el-col :span="8">
                    <span class="label">选择您要隔离的天数</span>
                </el-col>
                <el-col :span="1">
                    <el-button @click="day--" type="text">-</el-button>
                </el-col>
                <el-col :span="3">
                    <el-input style="width: 60px" v-model="day"></el-input>
                </el-col>
                <el-col :span="10">
                    <el-button @click="day++" type="text">+</el-button>
                </el-col>
            </el-row>
        </div>
    </el-container>
    <div class="downDiv">
        <span >合计:￥</span>
        <span style="font-size: x-large">{{totalMoney}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

        <svg  xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-cart4" viewBox="0 0 16 16">
            <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5zM3.14 5l.5 2H5V5H3.14zM6 5v2h2V5H6zm3 0v2h2V5H9zm3 0v2h1.36l.5-2H12zm1.11 3H12v2h.61l.5-2zM11 8H9v2h2V8zM8 8H6v2h2V8zM5 8H3.89l.5 2H5V8zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z"/>
        </svg>
        <el-button class="downBtn" @click="payDialog=true" round>确认支付</el-button>
    </div>
    <el-dialog v-model="payDialog"
               title="请您支付"
               whith="50%"
    >
        <span>您一共需支付{{totalMoney}}元</span>
        <div style="margin: 0 auto;width: 50%">
            <el-from>
                <el-from-item>
                    <el-input type="textarea"
                              rows="4"
                              placeholder="请输入您的行程，我们将发送短信通知区域负责人来接您。列如我乘坐xxx航班12月24日12：24抵达xxx">
                    </el-input>
                </el-from-item>
            </el-from>
        </div>
        <template #footer>
            <el-button @click="changePay" plain>{{imgMes}}</el-button>
            <el-button @click="toPay" type="info">去支付</el-button>
            <el-button @click="payDialog=false">取消</el-button>
        </template>
    </el-dialog>
</div>
<script>


    const App ={
        data(){
            return{
                payDialog: false,
                imgVx: true,
                imgMes: '支付宝支付',
                place: {},
                day: 1,
                money: 140,
            }
        },
        methods: {
            toVisitor() {
                axios({
                    method: 'get',
                    url: 'visitor',
                    headers: {'token': localStorage.getItem('token') }
                }).then(res => {
                    if(res.data.data){
                        this.$message.error("登陆状态已过期或未登录")
                        window.setTimeout(function () {
                            window.location.href = window.location.protocol + '//' + window.location.host + "/"}, 2 * 1000)
                    }
                })
            },
            queryExpect() {
                axios({
                    method: 'get',
                    url: 'queryExpect',
                    headers: {'token': localStorage.getItem('token') }
                }).then(res => {
                    if(res.data.code === '0'){
                        this.place= res.data.data
                    }else {
                        this.$message.error(res.data.msg)
                    }
                })
            },
            toPay(){
                this.$message.success("支付成功")
            },
            changePay(){
                this.imgVx = !this.imgVx
            }
        },
        created() {
            this.toVisitor()
            this.queryExpect()
        },
        watch:{
            'imgVx'(){
                if(this.imgVx === true){
                    this.imgMes = '支付宝支付'
                }else{
                    this.imgMes = '微信支付'
                }
            }
        },
        computed:{
            totalMoney(){
                return this.money * this.day
            }
        }
    }
    Vue.createApp(App)
        .use(ElementPlus)
        .mount("#app")
</script>
</body>
</html>
